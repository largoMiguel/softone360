<div class="sidebar h-100 d-flex flex-column">
    <!-- Close button (visible only on small screens) -->
    <button class="btn btn-link text-white text-start d-lg-none mb-0 p-3" (click)="sidebar.toggle()">
        <i class="fas fa-times me-2"></i>Cerrar
    </button>

    <div class="menu px-3 py-2">
        <!-- Inicio -->
        <div class="menu-group">
            <ul class="list-unstyled">
                <li>
                    <a class="menu-link" [class.active]="isActiveView('welcome')" (click)="goDashboard('welcome')">
                        <i class="fas fa-home me-2"></i>Inicio
                    </a>
                </li>
            </ul>
        </div>

        <!-- Dashboard Group -->
        <div class="menu-group" *ngIf="canAccessPqrs()">
            <div class="menu-title clickable" (click)="toggleMenu('pqrs')">
                <i class="fas fa-tachometer-alt me-2"></i>GESTIÓN DE PQRS
                <i class="fas fa-chevron-down ms-auto chevron" [class.rotated]="menuStates.pqrs"></i>
            </div>
            <ul class="list-unstyled ms-1 submenu" [class.expanded]="menuStates.pqrs">
                <li>
                    <a class="menu-link" [class.active]="isActiveView('dashboard')" (click)="goDashboard('dashboard')">
                        <i class="fas fa-chart-pie me-2"></i>Resumen
                    </a>
                </li>
                <li *ngIf="canAccessPqrs()">
                    <a class="menu-link" [class.active]="isActiveView('mis-pqrs')" (click)="goDashboard('mis-pqrs')">
                        <i class="fas fa-list me-2"></i>Mis PQRS
                    </a>
                </li>
            </ul>
        </div>

        <!-- Usuarios (independiente) -->
        <div class="menu-group" *ngIf="isAdmin() && usersAdminEnabled()">
            <div class="menu-title clickable" (click)="toggleMenu('usuarios')">
                <i class="fas fa-users me-2"></i>USUARIOS
                <i class="fas fa-chevron-down ms-auto chevron" [class.rotated]="menuStates.usuarios"></i>
            </div>
            <ul class="list-unstyled ms-1 submenu" [class.expanded]="menuStates.usuarios">
                <li>
                    <a class="menu-link" [class.active]="isActiveView('usuarios')" (click)="goDashboard('usuarios')">
                        <i class="fas fa-user-cog me-2"></i>Administrar
                    </a>
                </li>
            </ul>
        </div>

        <!-- Planes -->
        <div class="menu-group" *ngIf="canAccessPlanes()">
            <div class="menu-title clickable" (click)="toggleMenu('planes')">
                <i class="fas fa-clipboard-list me-2"></i>PLANES INSTITUCIONALES
                <i class="fas fa-chevron-down ms-auto chevron" [class.rotated]="menuStates.planes"></i>
            </div>
            <ul class="list-unstyled ms-1 submenu" [class.expanded]="menuStates.planes">
                <li>
                    <a class="menu-link" [class.active]="isActiveRoutePlanes()" (click)="goPlanes()">
                        <i class="fas fa-angle-right me-2"></i>Ingresar
                    </a>
                </li>
            </ul>
        </div>

        <!-- Contratación -->
        <div class="menu-group" *ngIf="canAccessContratacion()">
            <div class="menu-title clickable" (click)="toggleMenu('contratacion')">
                <i class="fas fa-file-contract me-2"></i>CONTRATACIÓN
                <i class="fas fa-chevron-down ms-auto chevron" [class.rotated]="menuStates.contratacion"></i>
            </div>
            <ul class="list-unstyled ms-1 submenu" [class.expanded]="menuStates.contratacion">
                <li>
                    <a class="menu-link" [class.active]="isActiveRouteContratacion('secop2')" (click)="goContratacion('secop2')">
                        <i class="fas fa-angle-right me-2"></i>SECOP II
                    </a>
                </li>
                <li>
                    <a class="menu-link" [class.active]="isActiveRouteContratacion('secop1')" (click)="goContratacion('secop1')">
                        <i class="fas fa-angle-right me-2"></i>SECOP I
                    </a>
                </li>
            </ul>
        </div>

        <!-- PDM -->
        <div class="menu-group" *ngIf="canAccessPdm()">
            <div class="menu-title clickable" (click)="toggleMenu('pdm')">
                <i class="fas fa-chart-line me-2"></i>PLAN DE DESARROLLO
                <i class="fas fa-chevron-down ms-auto chevron" [class.rotated]="menuStates.pdm"></i>
            </div>
            <ul class="list-unstyled ms-1 submenu" [class.expanded]="menuStates.pdm">
                <li>
                    <a class="menu-link" [class.active]="isActiveRoutePdm()" (click)="goPdmUpload()">
                        <i class="fas fa-angle-right me-2"></i>Ingresar
                    </a>
                </li>
                <li *ngIf="isAdmin()">
                    <a class="menu-link" (click)="openCargarEjecucion()">
                        <i class="fas fa-angle-right me-2"></i>Cargar Ejecución
                    </a>
                </li>
                <li *ngIf="isAdmin()">
                    <a class="menu-link" (click)="openCargarNuevoArchivo()">
                        <i class="fas fa-angle-right me-2"></i>Cargar Nuevo Archivo
                    </a>
                </li>
            </ul>
        </div>
    </div>
</div>